version: 2
jobs:
  dockerhubuploadrelease:
     machine: true
     steps:
       - checkout
       - run: docker build -f docker/Dockerfile -t lilitumerenwen/test:${CIRCLE_TAG} .
       - run: docker login --username $DOCKER_HUB_USERNAME --password $DOCKER_HUB_PASSWORD 
       - run: docker push lilitumerenwen/test:${CIRCLE_TAG}

workflows:
  version: 2
  build:
    jobs:
      - dockerhubuploadrelease:
          filters:
            branches:
             only: master
 
